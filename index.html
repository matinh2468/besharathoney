<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="utf-8">
    <title>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¹Ø³Ù„ Ø¨Ø´Ø§Ø±Øª (Ù‡ÛŒØ±)</title>
    <meta name="viewport" content="width=device-width, initial-scale=0.4">
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazir-font@v33.0.3/Vazirmatn.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <style>
        :root {
            --red: #ef394e;
            --gold: #ffcc00;
            --bg: #fcfaf5;
            --dark: #1a1a1a;
            --green: #2ecc71;
        }
        * { box-sizing: border-box; font-family: Vazirmatn, sans-serif; }
        body { margin: 0; background: var(--bg); font-size: 18px; padding-bottom: 120px; overflow-x: hidden; scroll-behavior: smooth; }

        /* HEADER */
        header { position: sticky; top: 0; z-index: 500; background: #fff; padding: 10px 20px; border-bottom: 5px solid var(--red); box-shadow: 0 4px 12px rgba(0,0,0,0.08); }
        .header-box { display: flex; justify-content: space-between; align-items: center; max-width: 1200px; margin: auto; }
        .brand { display: flex; align-items: center; gap: 12px; }
        .brand img { width: 55px; height: 55px; border-radius: 15px; border: 2px solid var(--red); object-fit: cover; }
        .top-nav { display: flex; gap: 20px; }
        .top-nav a { text-decoration: none; color: var(--dark); font-weight: bold; font-size: 15px; transition: 0.3s; }
        .top-nav a:hover { color: var(--red); }
        #cart-count { background: var(--red); color: #fff; border-radius: 50%; padding: 2px 8px; font-size: 14px; margin-right: 6px; }

        /* HERO */
        .hero { height: 60vh; background: linear-gradient(rgba(0,0,0,0.6),rgba(0,0,0,0.6)), url('AKS99.jpg') center/cover no-repeat; display: flex; align-items: center; justify-content: center; text-align: center; color: #fff; border-bottom: 10px solid var(--gold); }
        .hero h2 { font-size: 40px; margin-bottom: 15px; text-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        /* GALLERY SECTION */
        .gallery-container { margin-bottom: 40px; }
        .gallery-title { color: var(--dark); margin-bottom: 20px; display: flex; align-items: center; gap: 10px; }
        .gallery-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; }
        .gallery-item { border-radius: 20px; overflow: hidden; height: 200px; border: 3px solid #fff; box-shadow: 0 5px 15px rgba(0,0,0,0.1); transition: 0.4s; }
        .gallery-item img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .gallery-item:hover { transform: translateY(-5px); border-color: var(--gold); }
        .gallery-item:hover img { transform: scale(1.1); }

        /* TOAST NOTIFICATION */
        #toast { visibility: hidden; min-width: 280px; background-color: var(--dark); color: #fff; text-align: center; border-radius: 20px; padding: 16px; position: fixed; z-index: 6000; left: 50%; bottom: 100px; transform: translateX(-50%); font-size: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.3); border-bottom: 4px solid var(--green); }
        #toast.show { visibility: visible; animation: fadeInUp 0.5s, fadeOutDown 0.5s 2.5s; }
        @keyframes fadeInUp { from { bottom: 0; opacity: 0; } to { bottom: 100px; opacity: 1; } }
        @keyframes fadeOutDown { from { bottom: 100px; opacity: 1; } to { bottom: 0; opacity: 0; } }

        /* SECTIONS & PRODUCTS */
        .info-container { max-width: 1100px; margin: 60px auto; padding: 0 20px; }
        .info-row { display: flex; align-items: center; gap: 40px; margin-bottom: 80px; flex-wrap: wrap; }
        .info-row.reverse { flex-direction: row-reverse; }
        .info-img img { width: 100%; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); border: 4px solid #fff; }
        .section { margin: 20px; background: var(--red); border-radius: 40px; padding: 40px 30px; color: #fff; }
        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(250px, 1fr)); gap: 25px; }
        .card { background: #fff; color: #000; border-radius: 30px; padding: 20px; text-align: center; transition: 0.3s; }
        .card img { width: 100%; height: 180px; object-fit: contain; }
        .price { font-weight: 900; font-size: 22px; margin: 12px 0; color: var(--red); }

        /* FOOTER */
        .main-footer { background: var(--dark); color: #fff; padding: 80px 20px 140px; border-top: 8px solid var(--gold); border-radius: 80px 80px 0 0; }
        .footer-container { max-width: 1200px; margin: auto; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 40px; }
        .footer-box h4 { color: var(--gold); font-size: 1.4rem; margin-bottom: 20px; position: relative; padding-bottom: 10px; }
        .footer-box h4::after { content: ''; position: absolute; right: 0; bottom: 0; width: 40px; height: 3px; background: var(--red); }
        .footer-box p, .footer-box li { font-size: 15px; line-height: 2; opacity: 0.8; }
        .footer-box ul { list-style: none; padding: 0; }
        .footer-box ul li a { color: #fff; text-decoration: none; transition: 0.3s; }
        .footer-box ul li a:hover { color: var(--red); padding-right: 5px; }
        .footer-logo-big { text-align: center; }
        .footer-logo-big img { width: 180px; border-radius: 30px; border: 3px solid #333; filter: drop-shadow(0 0 15px rgba(255,204,0,0.2)); }
        .social-links { display: flex; gap: 15px; margin-top: 20px; }
        .social-links a { width: 45px; height: 45px; background: #333; display: flex; align-items: center; justify-content: center; border-radius: 12px; color: #fff; text-decoration: none; font-size: 22px; transition: 0.3s; }
        .social-links a:hover { background: var(--red); transform: translateY(-5px); }

        /* MODALS */
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.85); z-index: 5000; align-items: center; justify-content: center; padding: 15px; }
        .modal-content { background: #fff; border-radius: 35px; padding: 30px; width: 100%; max-width: 500px; color: #333; position: relative; }
        .cart-item { display: flex; justify-content: space-between; align-items: center; background: #f9f9f9; padding: 12px; border-radius: 15px; margin-bottom: 10px; }
        .remove-btn { color: var(--red); cursor: pointer; border: none; background: none; font-size: 18px; }
        .btn { background: var(--red); color: #fff; border: none; width: 100%; padding: 15px; border-radius: 20px; font-size: 18px; font-weight: 800; cursor: pointer; transition: 0.2s; }
        input, textarea { width: 100%; padding: 15px; border-radius: 18px; border: 2px solid #eee; margin-bottom: 12px; outline: none; }

        /* PC ORDER BOX (NEW) */
        .pc-order-box { text-align: center; background: #fff7e6; padding: 15px; border-radius: 20px; border: 2px dashed var(--gold); margin-top: 10px; }

        /* BOTTOM NAV */
        nav.bottom-nav { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 92%; max-width: 450px; background: rgba(255,255,255,0.95); display: flex; justify-content: space-around; padding: 12px; border-radius: 30px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); z-index: 4000; border: 1px solid var(--red); }
        nav.bottom-nav div { display: flex; flex-direction: column; align-items: center; font-size: 12px; cursor: pointer; color: var(--dark); opacity: 0.5; }
        nav.bottom-nav div.active { opacity: 1; color: var(--red); font-weight: bold; }
    </style>
</head>
<body>

    <div id="toast">Ù…Ø­ØµÙˆÙ„ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ âœ…</div>

    <header>
        <div class="header-box">
            <div class="brand">
                <img src="Ù„ÙˆÚ¯Ùˆ.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/517/517563.png'">
                <h1>Ø¹Ø³Ù„ Ø¨Ø´Ø§Ø±Øª</h1>
            </div>
            <div class="top-nav">
                <a href="#home-page">Ø®Ø§Ù†Ù‡</a>
                <a href="#products-section">Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
                <a href="Ø´Ø±ÙˆØ¹_2.html">Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§</a>
                <a href="Ø´Ø±ÙˆØ¹_2_2.html"> Ù…Ø­ØµÙˆÙ„Ø§Øª Ø¹Ù…Ø¯Ù‡ </a>
            </div>
            <div onclick="openCart()" style="cursor:pointer">
                <i class="fas fa-shopping-basket fa-lg"></i>
                <span id="cart-count">Û°</span>
            </div>
        </div>
    </header>

    <main id="home-page">
        <div class="hero">
            <div data-aos="zoom-in">
                <h2>Ø´Ù‡Ø¯ Ù¾Ø§Ú© Ú©ÙˆÙ‡Ø³ØªØ§Ù† Ù‡ÛŒØ±</h2>
                <p>Ø§Ø±Ú¯Ø§Ù†ÛŒÚ©ØŒ Ø·Ø¨ÛŒØ¹ÛŒ Ùˆ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø² Ø²Ù†Ø¨ÙˆØ±Ø³ØªØ§Ù† Ø¨Ø´Ø§Ø±Øª</p>
            </div>
        </div>

        <div class="info-container">
            <div class="info-row" data-aos="fade-left">
                <div style="flex:1">
                    <h2 style="color:var(--red)">Ø¹Ø³Ù„ Ú©Ø§Ù…Ù„Ø§Ù‹ Ø·Ø¨ÛŒØ¹ÛŒ Ù‡ÛŒØ±</h2>
                    <p style="line-height:2">Ù…Ù†Ø·Ù‚Ù‡ Ù‡ÛŒØ± Ø§Ø±Ø¯Ø¨ÛŒÙ„ Ø¨Ù‡ Ø¯Ù„ÛŒÙ„ Ù¾ÙˆØ´Ø´ Ú¯ÛŒØ§Ù‡ÛŒ ØºÙ†ÛŒØŒ ÛŒÚ©ÛŒ Ø§Ø² Ø¨Ù‡ØªØ±ÛŒÙ† Ù…Ù†Ø§Ø·Ù‚ Ø¨Ø±Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ø¹Ø³Ù„ Ø¯Ø± Ø§ÛŒØ±Ø§Ù† Ø§Ø³Øª. Ù…Ø§ Ø§ØµØ§Ù„Øª Ùˆ Ú©ÛŒÙÛŒØª Ù…Ø­ØµÙˆÙ„Ø§ØªÙ…Ø§Ù† Ø±Ø§ ØªØ¶Ù…ÛŒÙ† Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ….</p>
                </div>
                <div style="flex:1"><img src="STOAKS/ho2.jpg" style="width:100%; border-radius:30px; border:4px solid #fff;"></div>
            </div>

            <div class="gallery-container" data-aos="fade-up">
                <h3 class="gallery-title"><i class="fas fa-camera-retro" style="color:var(--gold)"></i> ØªØµØ§ÙˆÛŒØ± Ø²Ù†Ø¨ÙˆØ±Ø³ØªØ§Ù† Ùˆ ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h3>
                <div class="gallery-grid">
                    <div class="gallery-item"><img src="STOAKS/AKS20.jpg" onerror="this.src='https://picsum.photos/400/300?random=1'"></div>
                    <div class="gallery-item"><img src="STOAKS/AKS22.jpg" onerror="this.src='https://picsum.photos/400/300?random=2'"></div>
                    <div class="gallery-item"><img src="STOAKS/AKS24.jpg" onerror="this.src='https://picsum.photos/400/300?random=3'"></div>
                    <div class="gallery-item"><img src="STOAKS/AKS23.jpg" onerror="this.src='https://picsum.photos/400/300?random=4'"></div>
                </div>
            </div>

            <div id="products-section" class="section">
                <h3><i class="fas fa-store"></i> ÙˆÛŒØªØ±ÛŒÙ† ÙØ±ÙˆØ´Ú¯Ø§Ù‡</h3>
                <div id="products" class="grid"></div>
            </div>

            <div class="info-row reverse" data-aos="fade-right">
                <div style="flex:1">
                    <h2 style="color:var(--red)">ØªØ¶Ù…ÛŒÙ† Ø¨Ø§Ø²Ú¯Ø´Øª ÙˆØ¬Ù‡</h2>
                    <p style="line-height:2">Ø¯Ø± ØµÙˆØ±Øª Ø¹Ø¯Ù… Ø±Ø¶Ø§ÛŒØª Ø§Ø² Ú©ÛŒÙÛŒØª Ø¹Ø³Ù„ ÛŒØ§ Ø¹Ø¯Ù… Ù…Ø·Ø§Ø¨Ù‚Øª Ø¨Ø§ Ø¨Ø±Ú¯Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ØŒ Ù…Ø§ Ø¨Ø§ Ú©Ù…Ø§Ù„ Ù…ÛŒÙ„ ØªÙ…Ø§Ù… ÙˆØ¬Ù‡ Ø´Ù…Ø§ Ø±Ø§ Ù…Ø³ØªØ±Ø¯ Ø®ÙˆØ§Ù‡ÛŒÙ… Ú©Ø±Ø¯.</p>
                </div>
                <div style="flex:1"><img src="STOAKS/ho1.jpg" style="width:100%; border-radius:30px; border:4px solid #fff;"></div>
            </div>
        </div>
    </main>

    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-box" data-aos="fade-up">
                <h4>Ø¹Ø³Ù„ Ø¨Ø´Ø§Ø±Øª Ù‡ÛŒØ±</h4>
                <p>ØªÙˆÙ„ÛŒØ¯Ú©Ù†Ù†Ø¯Ù‡ ØªØ®ØµØµÛŒ Ø¹Ø³Ù„ Ø·Ø¨ÛŒØ¹ÛŒØŒ Ú˜Ù„ Ø±ÙˆÛŒØ§Ù„ Ùˆ Ú¯Ø±Ø¯Ù‡ Ú¯Ù„. Ù…Ø§ Ø§Ø² Ø³Ø§Ù„ Û±Û³Û¸Û° Ø¯Ø± Ú©Ù†Ø§Ø± Ø´Ù…Ø§ Ù‡Ø³ØªÛŒÙ….</p>
                <div class="social-links">
                    <a href="https://t.me/+PW6YuUmeoAcwZDg0"><i class="fab fa-telegram-plane"></i></a>
                    <a href="https://rubika.ir/besharathoney"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e0/Rubika_logo.svg/1024px-Rubika_logo.svg.png" style="width:22px"></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            <div class="footer-box" data-aos="fade-up" data-aos-delay="100">
                <h4>Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³</h4>
                <ul>
                    <li>Ù…Ø¯ÛŒØ±ÛŒØª:ÛŒÙˆØ³ÛŒÙ Ø¨Ø´Ø§Ø±Øª Û°Û¹Û±Û´Û´ÛµÛ´Û¹Û±Û·Û²</li>
                    <li>Ø§Ø±Ø¯Ø¨ÛŒÙ„ØŒ Ø´Ù‡Ø± Ù‡ÛŒØ±ØŒ ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ø¨Ø´Ø§Ø±Øª</li>
                </ul>
            </div>
            <div class="footer-logo-big" data-aos="fade-left">
                <img src="Ù„ÙˆÚ¯Ùˆ.png" onerror="this.src='https://cdn-icons-png.flaticon.com/512/517/517563.png'">
            </div>
        </div>
    </footer>

    <div id="cartModal" class="modal">
        <div class="modal-content">
            <h2 style="text-align:center">ğŸ›’ Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h2>
            <div id="cartList" style="max-height:300px; overflow-y:auto; margin:20px 0"></div>
            <div style="display:flex; justify-content:space-between">
                <b>Ø¬Ù…Ø¹ Ú©Ù„:</b> <b id="totalPrice" style="color:var(--red)">Û° ØªÙˆÙ…Ø§Ù†</b>
            </div>
            <button class="btn" style="margin-top:20px" onclick="openCheckout()">Ø«Ø¨Øª Ù†Ù‡Ø§ÛŒÛŒ</button>
            <button onclick="closeModals()" style="width:100%; border:none; background:none; margin-top:15px; color:#999; cursor:pointer">Ø¨Ø³ØªÙ†</button>
        </div>
    </div>

    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <h3>ğŸ“ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø§Ø±Ø³Ø§Ù„</h3>
            <input type="text" id="uName" placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ">
            <input type="tel" id="uPhone" placeholder="Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³">
            <textarea id="uAddr" rows="3" placeholder="Ø¢Ø¯Ø±Ø³ Ø¯Ù‚ÛŒÙ‚ Ú¯ÛŒØ±Ù†Ø¯Ù‡"></textarea>
            <button class="btn" onclick="finishOrder()">Ø§Ø±Ø³Ø§Ù„ Ø³ÙØ§Ø±Ø´</button>
            <button onclick="closeModals()" style="width:100%; border:none; background:none; margin-top:10px; color:#999; cursor:pointer">Ø¨Ø§Ø²Ú¯Ø´Øª</button>
        </div>
    </div>

    <div id="pcAlertModal" class="modal">
        <div class="modal-content" style="text-align:center">
            <i class="fas fa-desktop fa-3x" style="color:var(--red); margin-bottom:15px"></i>
            <h3>Ø§Ø±Ø³Ø§Ù„ Ù¾ÛŒØ§Ù…Ú© Ø§Ø² Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ±</h3>
            <p style="font-size:16px; line-height:1.6">Ø´Ù…Ø§ Ø¨Ø§ Ú©Ø§Ù…Ù¾ÛŒÙˆØªØ± ÙˆØ§Ø±Ø¯ Ø´Ø¯Ù‡â€ŒØ§ÛŒØ¯. Ù„Ø·ÙØ§Ù‹ Ø§ÛŒÙ† Ù…ØªÙ† Ø±Ø§ Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¨Ù‡ Ø´Ù…Ø§Ø±Ù‡ Ø²ÛŒØ± Ù¾ÛŒØ§Ù…Ú© ÛŒØ§ Ø±ÙˆØ¨ÛŒÚ©Ø§ Ø¨ÙØ±Ø³ØªÛŒØ¯:</p>
            <div class="pc-order-box">
                <strong style="color:var(--red)">Û°Û¹Û±Û´Û´ÛµÛ´Û¹Û±Û·Û²</strong>
            </div>
            <textarea id="finalOrderText" style="height:120px; font-size:14px; margin-top:10px; background:#f0f0f0" readonly></textarea>
            <button class="btn" onclick="copyOrderText()">Ú©Ù¾ÛŒ Ù…ØªÙ† Ø³ÙØ§Ø±Ø´</button>
            <button onclick="closeModals()" style="width:100%; border:none; background:none; margin-top:15px; color:#999; cursor:pointer">Ø¨Ø³ØªÙ†</button>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="active" onclick="window.scrollTo(0,0)"><i class="fas fa-home"></i><span>Ø®Ø§Ù†Ù‡</span></div>
        <div onclick="openCart()"><i class="fas fa-shopping-basket"></i><span>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</span></div>
        <div onclick="document.getElementById('products-section').scrollIntoView()"><i class="fas fa-store"></i><span>Ù…Ø­ØµÙˆÙ„Ø§Øª</span></div>
    </nav>

    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init({ duration: 1000, once: true });

        const products = [
            { id: 1, name: "Ø¹Ø³Ù„ Ø·Ø¨ÛŒØ¹ÛŒ ÛµÛ°Û° Ú¯Ø±Ù…", price: 390000, img: "mahsolat/asaltabi.jpg" },
            { id: 2, name: "Ø´Ù‡Ø¯ Ø®Ø§Ù„Øµ Û±Û°Û°Û° Ú¯Ø±Ù…", price: 890000, img: "mahsolat/ckales.jpg" },
            { id: 3, name: "Ú˜Ù„Ù‡ Ø±ÙˆÛŒØ§Ù„ Û±Û° Ú¯Ø±Ù…ÛŒ", price: 250000, img: "mahsolat/AL.jpg" },
            { id: 4, name: "Ú¯Ø±Ø¯Ù‡ Ú¯Ù„ Ù†ÛŒÙ… Ú©ÛŒÙ„Ùˆ", price: 500000, img: "mahsolat/garde.jpg" },
            { id: 5, name: "Ú¯Ø±Ø¯Ù‡ Ú¯Ù„ Û± Ú©ÛŒÙ„ÙˆÛŒÛŒ", price: 1000000, img: "mahsolat/garde.jpg" },
            { id: 6, name: "Ø¹Ø³Ù„ Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ù…ÙˆÙ…â€ŒØ¯Ø§Ø±", price: 300000, img: "mahsolat/asalmamolimom.jpg" },
            { id: 7, name: "Ø´Ù‡Ø¯ Ù…Ø¹Ù…ÙˆÙ„ÛŒ", price: 300000, img: "mahsolat/shahdmamoli.jpg" }
        ];

        let cart = JSON.parse(localStorage.getItem('B_CART')) || [];

        function showToast(message) {
            const x = document.getElementById("toast");
            x.innerText = message; x.className = "show";
            setTimeout(() => { x.className = x.className.replace("show", ""); }, 3000);
        }

        function renderProducts() {
            const grid = document.getElementById('products');
            grid.innerHTML = products.map(p => `
                <div class="card" data-aos="fade-up">
                    <img src="${p.img}" onerror="this.src='https://via.placeholder.com/200?text=Honey'">
                    <h4>${p.name}</h4>
                    <div class="price">${p.price.toLocaleString('fa-IR')} ØªÙˆÙ…Ø§Ù†</div>
                    <button class="btn" onclick="addToCart(${p.id})">Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø³Ø¨Ø¯</button>
                </div>`).join('');
            updateBadge();
        }

        function addToCart(id) {
            const p = products.find(x => x.id === id);
            const item = cart.find(x => x.id === id);
            item ? item.qty++ : cart.push({ ...p, qty: 1 });
            updateBadge();
            showToast(p.name + " Ø¨Ù‡ Ø³Ø¨Ø¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ ğŸ›’");
        }

        function removeFromCart(id) {
            cart = cart.filter(item => item.id !== id);
            updateBadge(); openCart();
            showToast("Ú©Ø§Ù„Ø§ Ø­Ø°Ù Ø´Ø¯ ğŸ—‘ï¸");
        }

        function updateBadge() {
            localStorage.setItem('B_CART', JSON.stringify(cart));
            document.getElementById('cart-count').innerText = cart.reduce((a, b) => a + b.qty, 0).toLocaleString('fa-IR');
        }

        function openCart() {
            const list = document.getElementById('cartList');
            let total = 0;
            list.innerHTML = cart.length > 0 ? cart.map(i => {
                total += (i.price * i.qty);
                return `<div class="cart-item">
                    <span>${i.name}</span>
                    <div>
                        <b>${(i.price * i.qty).toLocaleString('fa-IR')}</b>
                        <button class="remove-btn" onclick="removeFromCart(${i.id})"><i class="fas fa-trash-alt"></i></button>
                    </div>
                </div>`;
            }).join('') : '<p style="text-align:center">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ Ø´Ù…Ø§ ÙØ¹Ù„Ø§Ù‹ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª</p>';
            document.getElementById('totalPrice').innerText = total.toLocaleString('fa-IR') + ' ØªÙˆÙ…Ø§Ù†';
            document.getElementById('cartModal').style.display = 'flex';
        }

        function closeModals() { document.querySelectorAll('.modal').forEach(m => m.style.display = 'none'); }
        
        function openCheckout() {
            if (cart.length === 0) return showToast("Ø³Ø¨Ø¯ Ø®Ø§Ù„ÛŒ Ø§Ø³Øª! âŒ");
            closeModals();
            document.getElementById('checkoutModal').style.display = 'flex';
        }

        function finishOrder() {
            const name = document.getElementById('uName').value;
            const phone = document.getElementById('uPhone').value;
            const addr = document.getElementById('uAddr').value;
            if (!name || !phone || !addr) return alert("Ù„Ø·ÙØ§ ØªÙ…Ø§Ù… ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯");

            let txt = `Ø³ÙØ§Ø±Ø´ Ø¬Ø¯ÛŒØ¯ Ø¹Ø³Ù„ Ø¨Ø´Ø§Ø±Øª:\n`;
            cart.forEach(i => txt += `- ${i.name} (${i.qty})\n`);
            txt += `----\nÙ…Ø´ØªØ±ÛŒ: ${name}\nØªÙ…Ø§Ø³: ${phone}\nØ¢Ø¯Ø±Ø³: ${addr}`;

            const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

            if (isMobile) {
                window.location.href = `sms:09144549172?body=${encodeURIComponent(txt)}`;
            } else {
                closeModals();
                document.getElementById('finalOrderText').value = txt;
                document.getElementById('pcAlertModal').style.display = 'flex';
            }
        }

        function copyOrderText() {
            const copyText = document.getElementById("finalOrderText");
            copyText.select();
            document.execCommand("copy");
            showToast("Ù…ØªÙ† Ú©Ù¾ÛŒ Ø´Ø¯ âœ…");
        }

        renderProducts();
    </script>
</body>
</html>
